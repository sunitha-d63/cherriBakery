{% extends 'bakery/layout/base.html' %} {% load static %} {% block head %}
<link rel="stylesheet" href="{% static 'css/wishlist.css' %}" />
<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.0/font/bootstrap-icons.css"
/>
{% endblock %} {% block content %}
<div class="container my-5">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1>Your Wishlist</h1>
    <div>
      {% if wishlist_items %}
      <form action="{% url 'clear_wishlist' %}" method="post" class="d-inline">
        {% csrf_token %}
        <button type="submit" class="btn btn-outline-danger me-2">
          REMOVE ALL
        </button>
      </form>
      {% endif %}
      <a href="{% url 'all_products' %}" class="btn btn-primary">Next</a>
    </div>
  </div>
<div class="row row-cols-1 row-cols-md-3 g-4">
    {% for item in wishlist_items %}
    <div class="col d-flex">
        <div class="card  w-100 overflow-hidden" style="height: 400px; border-radius: 10px !important;">
            <div class="position-relative h-100">
                <a href="{{ item.product.get_absolute_url }}" class="h-100 d-block">
                    <img src="{{ item.product.image.url }}"
                         class="h-100 w-100 object-fit-cover"
                         alt="{{ item.product.title }}">
                    <div class="position-absolute bottom-0 start-0 w-100 p-3 text-center"
                         style="background: rgba(221, 211, 160, 0.9);">
                        <h5 class="card-title fs-4 text-black mb-1 text-uppercase fw-bold">
                            {{ item.product.title }}
                        </h5>
                        <p class="card-text fs-5 text-black mb-0 fw-semibold">
                            FROM: â‚¹{{ item.product.base_price }} <span class="small">PER KG</span>
                        </p>
                    </div>
                </a>
                <form method="post" action="{% url 'remove_from_wishlist' item.product.id %}" 
                      class="position-absolute top-0 end-0 m-2 z-2">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-sm btn-danger" title="Remove from wishlist">
                        <i class="bi bi-x"></i>
                    </button>
                </form>
            </div>
        </div>
    </div>
    {% empty %}
    <div class="col-12 text-center py-5">
        <i class="bi bi-heart text-muted" style="font-size: 3rem"></i>
        <h4 class="mt-3">Your wishlist is empty</h4>
        <a href="{% url 'all_products' %}" class="btn btn-primary mt-3">
            Browse Products
        </a>
    </div>
    {% endfor %}
</div>
</div>
{% endblock %} 

