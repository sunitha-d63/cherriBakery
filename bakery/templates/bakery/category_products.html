{% extends 'bakery/layout/base.html' %} {% load static %} {% block css %}
<link rel="stylesheet" href="{% static 'css/categoryproduct.css' %}" />
<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.0/font/bootstrap-icons.css"
/>
{% endblock %} {% block content %}
<div class="container my-5">
  <div class="d-flex justify-content-center align-items-center mb-4">
    <h1 class="title">{{ category.name|upper }}</h1>
  </div>
  <div class="row row-cols-1 row-cols-md-3 g-4">
    {% for product in products %}
    <div class="col d-flex">
      <div
        class="card product-card w-100 overflow-hidden"
        style="height: 400px; border-radius: 10px !important"
      >
        <form
          action="{% url 'toggle_wishlist' product.id %}"
          method="post"
          class="position-absolute top-0 end-0 m-2 z-2"
        >
          {% csrf_token %}
          <button
            type="submit"
            class="btn btn-light rounded-circle px-2 shadow"
          >
            {% if product.is_in_wishlist %}
            <i class="bi bi-heart-fill text-danger fs-5"></i>
            {% else %}
            <i class="bi bi-heart fs-5"></i>
            {% endif %}
          </button>
        </form>

        <a
          href="{{ product.get_absolute_url }}"
          class="text-decoration-none h-100 d-flex flex-column"
        >
          <div class="position-relative flex-grow-1 overflow-hidden">
            {% if product.image and product.image.url %}
            <img
              src="{{ product.image.url }}"
              class="h-100 w-100 object-fit-cover"
              alt="{{ product.title }}"
              style="min-width: 100%; min-height: 100%"
            />
            {% else %}
            <img
              src="{% static 'images/no-image.png' %}"
              class="h-100 w-100 object-fit-cover"
              alt="No image available"
              style="min-width: 100%; min-height: 100%"
            />
            {% endif %}

            <div
              class="position-absolute bottom-0 start-0 w-100 p-3 text-center"
              style="background: rgba(221, 211, 160, 0.9)"
            >
              <h5 class="card-title fs-4 fw-bold mb-1 text-uppercase" style="color:#D99A6C !important">
  {{ product.title }}
</h5>

              <div class="d-flex justify-content-center">
                <span class="text-black fs-5 fw-semibold">
                  FROM: â‚¹{{ product.base_price }}
                  <span class="small">PER KG</span>
                </span>
              </div>
            </div>
          </div>
        </a>
      </div>
    </div>
    {% empty %}
    <div class="col-12">
      <div class="alert alert-info">No products found in this category.</div>
    </div>
    {% endfor %}
  </div>
</div>
{% endblock %}
